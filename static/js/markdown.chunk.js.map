{"version":3,"sources":["component/Viewer/markdown.js","pages/markdown.app.js","pages/markdown.js"],"names":["codeSuffix","html","sql","go","py","js","json","c","cpp","css","txt","MarkdownViewerCompoment","state","val","componentWillReceiveProps","nextProps","_this","props","save","axios","post","item","window","fileInfo","path","content","document","getElementById","value","then","response","data","result","success","toggleSnackbar","error","catch","message","componentDidMount","suffix","name","split","pop","toLowerCase","editormd","height","tex","toolbarIcons","editSuffix","indexOf","watch","toolbar","codeFold","searchReplace","placeholder","mode","get","url","hasOwnProperty","setState","event","this","target","classes","react_default","a","createElement","className","layout","Paper_default","root","elevation","id","onChange","handleChange","Component","MarkdownViewer","connect","explorer","fileSave","dispatch","vertical","horizontal","msg","color","withStyles","theme","Object","defineProperty","width","marginTop","marginLeft","spacing","unit","marginRight","breakpoints","up","createMuiTheme","colorTheme","MarkdownApp","Fragment","core_styles","CssBaseline_default","Snackbar","Navbar","markdown","display","flexGrow","padding","minWidth","mixins","defaultStatus","navigator","refresh","viewUpdate","open","isHomePage","explorerViewMethod","sortMethod","contextType","menuOpen","navigatorLoading","navigatorError","navigatorErrorMsg","modalsLoading","storageRefresh","modals","createNewFolder","rename","move","remove","share","music","remoteDownload","torrentDownload","snackbar","toggle","fileList","dirList","selected","type","selectProps","isMultiple","withFolder","withFile","imgPreview","first","other","keywords","store","createStore","cloureveApp","ReactDOM","render","es","markdown_app"],"mappings":"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","file":"static/js/markdown.chunk.js","sourcesContent":["import React, { Component } from 'react'\nimport Paper from '@material-ui/core/Paper';\nimport { withStyles } from '@material-ui/core/styles';\nimport {\n    toggleSnackbar,\n} from \"../../actions/index\"\nimport axios from 'axios'\nimport { connect } from 'react-redux'\nimport {editSuffix} from \"../../config\"\nconst styles = theme => ({\n    layout: {\n        width: 'auto',\n        marginTop:'30px',\n        marginLeft: theme.spacing.unit * 3,\n        marginRight: theme.spacing.unit * 3,\n        [theme.breakpoints.up(1100 + theme.spacing.unit * 3 * 2)]: {\n          width: 1100,\n          marginLeft: 'auto',\n          marginRight: 'auto',\n        },\n      },\n})\nconst mapStateToProps = state => {\n    return {\n        save:state.explorer.fileSave,\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        toggleSnackbar:(vertical,horizontal,msg,color)=>{\n            dispatch(toggleSnackbar(vertical,horizontal,msg,color))\n        },\n    }\n}\nconst codeSuffix = {\n    \"html\":\"text/html\",\n    \"sql\":\"text/html\",\n    \"go\":\"go\",\n    \"py\":\"python\",\n    \"js\":\"javascript\",\n    \"json\":\"text/json\",\n    \"c\":\"clike\",\n    \"cpp\":\"clike\",\n    \"css\":\"css\",\n    \"txt\":\"text/html\"\n};\nclass MarkdownViewerCompoment extends Component {\n\n    state = {\n        val:\"\",\n    }\n\n    componentWillReceiveProps = (nextProps)=>{\n        if(this.props.save!==nextProps.save){\n            this.save();\n        }\n    }\n\n    save = ()=>{\n        axios.post(\"/File/Edit\",{\n            item:window.fileInfo.path,\n            content:window.document.getElementById(\"val\").value,\n        })\n        .then( (response)=> {\n            if(!response.data.result.success){\n                this.props.toggleSnackbar(\"top\",\"right\",response.data.result.error ,\"error\");\n            }else{\n                this.props.toggleSnackbar(\"top\",\"right\",\"文件已保存\" ,\"success\");\n            }\n            \n        })\n        .catch((error) =>{\n            this.props.toggleSnackbar(\"top\",\"right\",error.message ,\"error\");\n        });\n    }\n\n    componentDidMount = ()=>{\n        let suffix = window.fileInfo.name.split(\".\").pop().toLowerCase();\n        if(suffix === \"md\"){\n            // eslint-disable-next-line\n            var editor = window.editormd(\"editormd\", {\n                path : \"/static/js/mdeditor/lib/\",\n                height: 740,\n                tex : true,\n                toolbarIcons : function() {\n                    return  [\n                        \"undo\", \"redo\", \"|\", \n                        \"bold\", \"del\", \"italic\", \"quote\", \"|\", \n                        \"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\", \"|\", \n                        \"list-ul\", \"list-ol\", \"hr\", \"|\",\n                        \"link\", \"reference-link\", \"image\", \"code\", \"preformatted-text\", \"code-block\", \"table\", \"datetime\", \"html-entities\", \"pagebreak\", \"|\",\n                        \"goto-line\", \"watch\", \"clear\", \"search\", \"|\",\n                        \"help\", \"info\"\n                    ]; \n                },\n            });\n        }else if(editSuffix.indexOf(suffix)!==-1){\n            // eslint-disable-next-line\n            var editor = window.editormd(\"editormd\", {\n                path : \"/static/js/mdeditor/lib/\",\n                height: 740,\n                watch            : false,\n                toolbar          : false,\n                codeFold         : true,\n                searchReplace    : true,\n                placeholder      : \"Enjoy coding!\",\n                mode:codeSuffix[suffix],\n            });\n        }\n\n        axios.get(window.fileInfo.url)\n        .then( (response)=> {\n            if(response.data.result.hasOwnProperty(\"success\")){\n                this.props.toggleSnackbar(\"top\",\"right\",response.data.result.error ,\"error\");\n            }else{\n                this.setState({\n                    val:response.data.result,\n                });\n            }\n            \n        })\n        .catch((error) =>{\n            this.props.toggleSnackbar(\"top\",\"right\",error.message ,\"error\");\n        });\n    }\n\n\n\n    handleChange(event) {\n        this.setState({val: event.target.value});\n    }\n\n    render() {\n        const { classes } = this.props;\n        return (\n             <div className={classes.layout}>\n                <Paper className={classes.root} elevation={1}>\n                <div id=\"editormd\">\n                    <textarea \n                    id=\"val\"\n                    value={this.state.val}\n                    onChange={this.handleChange}\n                    ></textarea>\n                </div>\n                \n                </Paper>\n             </div>\n        );\n    }\n\n}\n\nconst MarkdownViewer = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)( withStyles(styles)(MarkdownViewerCompoment))\n  \nexport default MarkdownViewer","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport CssBaseline from '@material-ui/core/CssBaseline';\n\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Navbar from \"../component/Navbar.js\"\nimport AlertBar from \"../component/Snackbar\"\nimport MarkdownViewer from \"../component/Viewer/markdown\"\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\n\nconst theme = createMuiTheme(window.colorTheme);\nconst styles = theme => ({\n\n\troot: {\n\t\tdisplay: 'flex',\n\t},\n\tcontent: {\n\t\tflexGrow: 1,\n\t\tpadding: theme.spacing.unit * 0,\n\t\tminWidth: 0,\n\t},\n\ttoolbar: theme.mixins.toolbar,\n});\n\nclass MarkdownApp extends Component {\n\n\trender() {\n\t\tconst { classes } = this.props;\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<MuiThemeProvider theme={theme}>\n\t\t\t\t\t<div className={classes.root} id=\"container\">\n\t\t\t\t\t\t<CssBaseline />\n\t\t\t\t\t\t<AlertBar/>\n\t\t\t\t\t\t<Navbar />\n\t\t\t\t\t\t<main className={classes.content}>\n\t\t\t\t\t\t\t<div className={classes.toolbar} />\n\t\t\t\t\t\t\t<MarkdownViewer/>\n\t\t\t\t\t\t</main>\n\t\t\t\t\t</div></MuiThemeProvider>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nMarkdownApp.propTypes = {\n\tclasses: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(MarkdownApp);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { Provider } from 'react-redux'\nimport { createStore } from 'redux'\nimport cloureveApp from '../reducers'\nimport MarkdownApp from \"./markdown.app\"\nconst defaultStatus = {\n    navigator:{\n        path:window.path,\n        refresh:true,\n    },\n    viewUpdate:{\n        open:window.isHomePage,\n        explorerViewMethod: \"icon\",\n        sortMethod:\"timePos\",\n        contextType:\"none\",  \n        menuOpen:false,\n        navigatorLoading:true,\n        navigatorError:false,\n        navigatorErrorMsg:null,\n        modalsLoading:false,\n        storageRefresh:false,\n        modals:{\n            createNewFolder:false,\n            rename:false,\n            move:false,\n            remove:false,\n            share:false,\n            music:false,\n            remoteDownload:false,\n            torrentDownload:false,\n        },\n        snackbar:{\n            toggle:false,\n            vertical:\"top\",\n            horizontal:\"center\",\n            msg:\"\",\n            color:\"\",\n        }\n    },\n    explorer:{\n        fileList:[],\n        fileSave:false,\n        dirList:[\n        ],\n        selected:[{path:\"/\",name:window.fileInfo.name,type:\"file\"}],\n        selectProps:{\n            isMultiple:false,\n            withFolder:false,\n            withFile:true,\n        },\n        imgPreview:{\n            first:null,\n            other:[],\n        },\n        keywords:null,\n    }\n};\n\nlet store = createStore(cloureveApp,defaultStatus)\nReactDOM.render(\n    <Provider store={store}>\n        <MarkdownApp/>\n    </Provider>\n, document.getElementById('root'));\n"],"sourceRoot":""}